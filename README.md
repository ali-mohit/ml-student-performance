# Student Performance APP
ML project to learn from [Student Exam Result]("https://www.kaggle.com/datasets/desalegngeb/students-exam-scores") to predict student's performance


## 1- Training Phase 

Creating a Dockerfile to build and train a model, then save it to AWS S3 involves several steps. First, you'll need to ensure your Docker image has all the necessary dependencies installed. Then, you'll need to create a Python script that trains the model and saves it to S3.

Here's a step-by-step guide:

    Dockerfile.train: This file sets up the environment and dependencies.
    ./src/training/training.py: This script performs the data loading, preprocessing, model training, and saving to S3.


### 1-1- Training Steps to Build and Run the Docker Container
 
- **Build the Docker Image**: Open a terminal, navigate to the directory containing the Dockerfile, and run:
```shell
docker build -t student-performance-app -f Dockerfile.train .
```

- **Run the Docker Container:** Ensure you have your AWS credentials configured locally (usually in ~/.aws/credentials) or configure them within the Docker container.
```shell
docker run -e AWS_ACCESS_KEY_ID=your_access_key -e AWS_SECRET_ACCESS_KEY=your_secret_key student-performance-app
```

Replace your-s3-bucket-name, your_access_key, and your_secret_key with your actual S3 bucket name and AWS credentials. This setup will ensure the environment is properly prepared to train the model and save it to S3.


**Note:
For security reasons, avoid hardcoding your AWS credentials in your scripts. Use environment variables or AWS IAM roles for secure credential management.**

## 2- Production Phase

To create an application that loads a trained model and responds to requests via a specific API, you can use a web framework such as Flask. Here’s a step-by-step guide to create a Flask application:

    src/production/app.py: This app will load the trained model and provide an endpoint to make predictions.
    Dockerfile.production: Update the Dockerfile to install Flask and other dependencies required for the application.

### 2-1- Production Steps to Build and Run the Docker Container

- ** Build the Docker Image:** Open a terminal, navigate to the directory containing the Dockerfile, and run:
```shell
docker build -t student-performance-app -f Dockerfile.production .
```

- **Run the Docker Container:** Ensure you have your AWS credentials configured locally (usually in ~/.aws/credentials) or configure them within the Docker container.

```shell
docker run -e AWS_ACCESS_KEY_ID=your_access_key -e AWS_SECRET_ACCESS_KEY=your_secret_key -p 5000:5000 student-performance-app
```

Replace your-s3-bucket-name, your_access_key, and your_secret_key with your actual S3 bucket name and AWS credentials. This setup will ensure the environment is properly prepared to load the model, handle requests, and provide predictions via an API.

### 2-2- Making Predictions

To make predictions, you can send a POST request to the /predict endpoint with the required data in JSON format. Here’s an example using curl:

```shell
curl -X POST -H "Content-Type: application/json" -d '[
    {
        "Gender": "female",
        "EthnicGroup": "group B",
        "ParentEduc": "bachelor\'s degree",
        "LunchType": "standard",
        "TestPrep": "none",
        "ParentMaritalStatus": "married",
        "PracticeSport": "regularly",
        "IsFirstChild": "yes",
        "NrSiblings": 2,
        "TransportMeans": "school_bus",
        "WklyStudyHours": "< 5"
    },
    {
        "Gender": "male",
        "EthnicGroup": "group C",
        "ParentEduc": "some college",
        "LunchType": "free/reduced",
        "TestPrep": "completed",
        "ParentMaritalStatus": "single",
        "PracticeSport": "sometimes",
        "IsFirstChild": "no",
        "NrSiblings": 1,
        "TransportMeans": "private",
        "WklyStudyHours": "5 - 10"
    }
]' http://localhost:5000/predict
```

This command sends a sample data entry to the API and returns the prediction.


The API response might look like this:

```shell
[75.5, 63.4]
```

Explanation of the Response

    75.5: Predicted score for the first student in the input data.
    63.4: Predicted score for the second student in the input data.

These predictions are generated by the trained model based on the input features provided.

### 2-3- Additional Information

To ensure accurate predictions, make sure your preprocessing in the Flask app matches the preprocessing steps used during training. This includes handling missing values, encoding categorical variables, and scaling numerical features. The provided app.py script includes these preprocessing steps to maintain consistency.

## 3- CI/CD Example with GitHub Actions
you can find an example of CI/CD file in `cicd_main.yml`